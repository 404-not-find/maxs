SHARED_SOURCE := src/org/projectmaxs/shared
SHARED_MODULE_SOURCE := src/org/projectmaxs/sharedmodule
ANT_BUILD_TARGET ?= debug

.PHONY: all clean eclipse shared

all: module

module: $(SHARED_SOURCE) $(SHARED_MODULE_SOURCE)
	ant $(ANT_BUILD_TARGET)

clean:
	ant clean

shared: $(SHARED_SOURCE) $(SHARED_MODULE_SOURCE)

$(SHARED_SOURCE):
	ln -s ../../../../main/$@ $@

$(SHARED_MODULE_SOURCE):
	ln -s ../../../../sharedmodule $@

eclipse: .settings .classpath .project shared

.settings:
	ln -s ../build/eclipse/settings .settings

.classpath:
	ln -s build/eclipse/classpath .classpath

.project:
	ln -s build/eclipse/project .project
